{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { partitionHTMLProps, isIE } from '../utils';\nvar sizerStyle = {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  visibility: 'hidden',\n  height: 0,\n  overflow: 'scroll',\n  whiteSpace: 'pre'\n};\n\nvar copyStyles = function copyStyles(styles, node) {\n  node.style.fontSize = styles.fontSize;\n  node.style.fontFamily = styles.fontFamily;\n  node.style.fontWeight = styles.fontWeight;\n  node.style.fontStyle = styles.fontStyle;\n  node.style.letterSpacing = styles.letterSpacing;\n  node.style.textTransform = styles.textTransform;\n};\n\nvar InputAutosize =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(InputAutosize, _React$Component);\n\n  function InputAutosize(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.inputRef = void 0;\n    _this.sizerRef = void 0;\n    _this.placeHolderSizerRef = void 0;\n\n    _this.getInputId = function () {\n      return _this.props.inputId || _this.state.inputId;\n    };\n\n    _this.state = {\n      inputId: '_' + Math.random().toString(36).substr(2, 12),\n      inputWidth: props.minWidth\n    };\n    _this.inputRef = React.createRef();\n    _this.sizerRef = React.createRef();\n    _this.placeHolderSizerRef = React.createRef();\n    return _this;\n  }\n\n  var _proto = InputAutosize.prototype;\n\n  _proto.getInputInstance = function getInputInstance() {\n    return this.inputRef.current;\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.copyInputStyles();\n    this.updateInputWidth();\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(_prevProps, prevState) {\n    var inputWidth = this.state.inputWidth;\n\n    if (prevState.inputWidth !== inputWidth) {\n      var _this$props$onAutosiz, _this$props;\n\n      (_this$props$onAutosiz = (_this$props = this.props).onAutosize) === null || _this$props$onAutosiz === void 0 ? void 0 : _this$props$onAutosiz.call(_this$props, inputWidth);\n    }\n\n    this.updateInputWidth();\n  };\n\n  _proto.copyInputStyles = function copyInputStyles() {\n    if (!this.inputRef.current || !window.getComputedStyle) {\n      return;\n    }\n\n    var inputStyles = this.inputRef.current && window.getComputedStyle(this.inputRef.current);\n\n    if (!inputStyles) {\n      return;\n    }\n\n    if (this.sizerRef.current) {\n      copyStyles(inputStyles, this.sizerRef.current);\n    }\n\n    if (this.placeHolderSizerRef.current) {\n      copyStyles(inputStyles, this.placeHolderSizerRef.current);\n    }\n  };\n\n  _proto.updateInputWidth = function updateInputWidth() {\n    if (!this.sizerRef.current || typeof this.sizerRef.current.scrollWidth === 'undefined') {\n      return;\n    }\n\n    var _this$props2 = this.props,\n        minWidth = _this$props2.minWidth,\n        placeholder = _this$props2.placeholder,\n        value = _this$props2.value;\n    var newInputWidth;\n\n    if (placeholder && !value && this.placeHolderSizerRef.current) {\n      newInputWidth = Math.max(this.sizerRef.current.scrollWidth, this.placeHolderSizerRef.current.scrollWidth) + 2;\n    } else {\n      newInputWidth = this.sizerRef.current.scrollWidth + 2;\n    }\n\n    if (newInputWidth < minWidth) {\n      newInputWidth = minWidth;\n    }\n\n    if (newInputWidth !== this.state.inputWidth) {\n      this.setState({\n        inputWidth: newInputWidth\n      });\n    }\n  };\n\n  _proto.renderStyles = function renderStyles() {\n    var inputId = this.getInputId();\n    return isIE() ? React.createElement(\"style\", {\n      dangerouslySetInnerHTML: {\n        __html: \"input#\" + inputId + \"::-ms-clear {display: none;}\"\n      }\n    }) : null;\n  };\n\n  _proto.render = function render() {\n    var inputWidth = this.state.inputWidth;\n    var _this$props3 = this.props,\n        defaultValue = _this$props3.defaultValue,\n        value = _this$props3.value,\n        style = _this$props3.style,\n        className = _this$props3.className,\n        placeholder = _this$props3.placeholder,\n        inputClassName = _this$props3.inputClassName,\n        inputStyle = _this$props3.inputStyle,\n        tabIndex = _this$props3.tabIndex;\n    var inputId = this.getInputId();\n    var sizerValue = [defaultValue, value, ''].reduce(function (previousValue, currentValue) {\n      if (previousValue !== null && previousValue !== undefined) {\n        return previousValue;\n      }\n\n      return currentValue;\n    });\n\n    var wrapperStyle = _extends({}, style);\n\n    if (!wrapperStyle.display) {\n      wrapperStyle.display = 'inline-block';\n    }\n\n    var nextInputStyle = _extends({\n      boxSizing: 'content-box',\n      width: inputWidth + \"px\"\n    }, inputStyle);\n\n    var _partitionHTMLProps = partitionHTMLProps(this.props),\n        htmlInputProps = _partitionHTMLProps[0];\n\n    htmlInputProps.className = inputClassName;\n    htmlInputProps.id = inputId || inputId;\n    htmlInputProps.style = nextInputStyle;\n    htmlInputProps.tabIndex = tabIndex;\n    return React.createElement(\"div\", {\n      className: className,\n      style: wrapperStyle\n    }, this.renderStyles(), React.createElement(\"input\", _extends({}, htmlInputProps, {\n      ref: this.inputRef,\n      type: \"text\"\n    })), React.createElement(\"div\", {\n      ref: this.sizerRef,\n      style: sizerStyle\n    }, sizerValue), placeholder ? React.createElement(\"div\", {\n      ref: this.placeHolderSizerRef,\n      style: sizerStyle\n    }, placeholder) : null);\n  };\n\n  return InputAutosize;\n}(React.Component);\n\nInputAutosize.propTypes = {\n  className: PropTypes.string,\n  defaultValue: PropTypes.any,\n  inputId: PropTypes.string,\n  inputClassName: PropTypes.string,\n  inputStyle: PropTypes.object,\n  minWidth: PropTypes.number,\n  onChange: PropTypes.func,\n  placeholder: PropTypes.string,\n  style: PropTypes.object,\n  value: PropTypes.any,\n  onAutosize: PropTypes.func\n};\nInputAutosize.defaultProps = {\n  minWidth: 1\n};\nexport default InputAutosize;","map":null,"metadata":{},"sourceType":"module"}